<div class="modal-backdrop" (click)="onClose()"></div>
<div class="modal">
  <h2>Request Payment</h2>
  <form (ngSubmit)="submit()" #form="ngForm">
    <label>
      Contact
      <select [(ngModel)]="selectedContact" name="contact" required>
        <option value="" disabled>Select contact</option>
        <option *ngFor="let c of contacts" [value]="c.id">
          {{ c.nickname }} ({{ c.username }})
        </option>
      </select>
    </label>

    <label>
      Amount
      <input
        type="number"
        [(ngModel)]="amount"
        name="amount"
        required
        min="0.01"
        step="0.01"
      />
    </label>

    <label>
      Currency
      <select [(ngModel)]="currency" name="currency">
        <option value="EUR">EUR</option>
      </select>
    </label>

    <label>
      Message (optional)
      <textarea [(ngModel)]="message" name="message" rows="2"></textarea>
    </label>

    <label>
      Expires At (optional)
      <input type="date" [(ngModel)]="expiresAt" name="expiresAt" />
    </label>

    <div class="modal-actions">
      <button type="submit" [disabled]="loading || !form.form.valid">
        Request
      </button>
      <button type="button" (click)="onClose()">Cancel</button>
    </div>

    <div class="error" *ngIf="error">{{ error }}</div>
  </form>
</div>
