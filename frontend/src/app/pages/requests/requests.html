<!-- requests.component.html -->
<div class="requests-container">
  <div class="header">
    <h3>Pending Payment Requests</h3>
    <button class="new-request-btn" (click)="openRequestModal()">
      New Request
    </button>
  </div>

  <div *ngIf="loading" class="loading">Loading…</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <ul *ngIf="!loading && !error">
    <li *ngFor="let req of pendingRequests" class="request-item">
      <div class="info">
        <strong>{{ req.amount | number : "1.2-2" }} {{ req.currency }}</strong>
        from user #{{ req.requester_id }}
        <p *ngIf="req.message" class="message">{{ req.message }}</p>
        <small>Requested at {{ req.created_at | date : "short" }}</small>
      </div>
      <div class="actions">
        <button (click)="handleRequest(req, 'accepted')">Accept</button>
        <button (click)="handleRequest(req, 'declined')">Decline</button>
      </div>
    </li>
    <li *ngIf="pendingRequests.length === 0">No pending requests</li>
  </ul>

  <h3>All Requests</h3>
  <ul>
    <li *ngFor="let req of allRequests">
      {{ req.amount | number : "1.2-2" }} {{ req.currency }} from #{{
        req.requester_id
      }}
      — status: {{ req.status }}
    </li>
  </ul>
  <!-- Create Request Modal -->
  <app-request-create-modal
    *ngIf="showRequestModal"
    [contacts]="myContacts"
    (close)="showRequestModal = false"
    (success)="onRequestCreated()"
  ></app-request-create-modal>
</div>
